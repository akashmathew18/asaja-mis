<div class="container mt-3">

  <h4 class="mb-3">Wood Expense</h4>

  <!-- FORM -->
  <form #woodForm="ngForm" class="card p-3 mb-4">

    <div class="row g-3">

      <div class="col-md-3">
        <label>Date</label>
        <input type="date" class="form-control" name="expense_date" [(ngModel)]="form.expense_date" required>
      </div>

      <div class="col-md-3">
        <label>Wood Type</label>
        <input class="form-control" name="wood_type" [(ngModel)]="form.wood_type" required>
      </div>

      <div class="col-md-2">
        <label>Cubic</label>
        <input type="number" class="form-control" name="cubic" [(ngModel)]="form.cubic"
          (ngModelChange)="calculateTotal()" required min="0.01">
      </div>

      <div class="col-md-2">
        <label>Rate / Cubic</label>
        <input type="number" class="form-control" name="rate_per_cubic" [(ngModel)]="form.rate_per_cubic"
          (ngModelChange)="calculateTotal()" required min="0.01">
      </div>

      <div class="col-md-2">
        <label>Cutting</label>
        <input type="number" class="form-control" name="cutting_expense" [(ngModel)]="form.cutting_expense"
          (ngModelChange)="calculateTotal()" required min="0">
      </div>

      <div class="col-md-2">
        <label>Planing</label>
        <input type="number" class="form-control" name="planing_expense" [(ngModel)]="form.planing_expense"
          (ngModelChange)="calculateTotal()" required min="0">
      </div>

      <div class="col-md-2">
        <label>Transport</label>
        <input type="number" class="form-control" name="transportation_expense"
          [(ngModel)]="form.transportation_expense" (ngModelChange)="calculateTotal()" required min="0">
      </div>

      <div class="col-md-3">
        <label>Team</label>
        <input class="form-control" name="team_name" [(ngModel)]="form.team_name" required>
      </div>

      <!-- TOTAL -->
      <div class="col-md-3">
        <label>Total Expense</label>
        <input class="form-control" [value]="totalExpense" readonly>
      </div>

      <div class="col-md-6">
        <label>Remarks</label>
        <input class="form-control" name="remarks" [(ngModel)]="form.remarks">
      </div>

    </div>

    <!-- SAVE BUTTON -->

    <button type="button" class="btn btn-success mt-3" [disabled]="woodForm.invalid || saving" (click)="save(woodForm)">
      {{ editMode ? 'Update' : 'Save' }}
    </button>

    <div *ngIf="successMsg" class="alert alert-success mt-3">
      {{ lastAction === 'update' ? 'Entry updated successfully' : 'Entry created successfully' }}
    </div>



  </form>

  <!-- LIST -->
  <h5>Wood Expense Records</h5>

  <table class="table table-bordered table-sm">
    <thead class="table-dark">
      <tr>
        <th>Date</th>
        <th>Wood</th>
        <th>Cubic</th>
        <th>Rate</th>
        <th>Cut</th>
        <th>Plan</th>
        <th>Trans</th>
        <th>Total</th>
        <th>Team</th>
        <th>Remarks</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of list">
        <td>{{ r.expense_date }}</td>
        <td>{{ r.wood_type }}</td>
        <td>{{ r.cubic }}</td>
        <td>{{ r.rate_per_cubic }}</td>
        <td>{{ r.cutting_expense }}</td>
        <td>{{ r.planing_expense }}</td>
        <td>{{ r.transportation_expense }}</td>
        <td>{{ r.total_expense }}</td>
        <td>{{ r.team_name }}</td>
        <td>{{ r.remarks }}</td>
        <td>
          <button class="btn btn-sm btn-warning" (click)="editRow(r)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteRow(r.id)">Delete</button>
        </td>

      </tr>
    </tbody>
  </table>

</div>